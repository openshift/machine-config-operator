apiVersion: apiextensions.k8s.io/v1 # Hack because controller-gen complains if we don't have this
name: "[Stable] PinnedImageSet"
crd: 0000_80_pinnedimageset.crd.yaml
tests:
  onCreate:
  - name: Should be able to create a minimal PinnedImageSet
    initial: |
      apiVersion: machineconfiguration.openshift.io/v1
      kind: PinnedImageSet
      metadata:
        name: test-pinnedimageset
      spec:
        machineConfigPoolSelector:
          matchLabels:
            pools.operator.machineconfiguration.openshift.io/master: ""
        PinnedImages:
          - sha256:2c3ea52ac3a41c6d58e85977c3149413e3fa4b70eb2397426456863adbf43306
          - sha256:d98795f7932441b30bb8bcfbbf05912875383fad1f2b3be08a22ec148d68607e
          - sha256:eacdc37aec78fdbf8caa9601e4012ab31453cf59b086474901900e853e803ea8
    expected: |
      apiVersion: machineconfiguration.openshift.io/v1
      kind: PinnedImageSet
      metadata:
        name: test-pinnedimageset
      spec:
        machineConfigPoolSelector:
          matchLabels:
            pools.operator.machineconfiguration.openshift.io/master: ""
        PinnedImages:
          - sha256:2c3ea52ac3a41c6d58e85977c3149413e3fa4b70eb2397426456863adbf43306
          - sha256:d98795f7932441b30bb8bcfbbf05912875383fad1f2b3be08a22ec148d68607e
          - sha256:eacdc37aec78fdbf8caa9601e4012ab31453cf59b086474901900e853e803ea8