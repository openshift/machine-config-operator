mode: 0644
path: "/etc/containers/storage.conf"
contents:
  inline: |
    # This file is generated by the Machine Config Operator's containerruntimeconfig controller.
    #
    # storage.conf is the configuration file for all tools
    # that share the containers/storage libraries
    # See man 5 containers-storage.conf for more information
    # The "container storage" table contains all of the server options.
    [storage]

    # Default storage driver, must be set for proper operation.
    driver = "overlay"

    # Temporary storage location
    runroot = "/run/containers/storage"

    # Primary Read/Write location of container storage
    graphroot = "/var/lib/containers/storage"

    [storage.options]
    # Storage options to be passed to underlying storage drivers

    # AdditionalImageStores is used to pass paths to additional Read/Only image stores
    # Must be comma separated list.
    additionalimagestores = [
    ]

    # Remap-UIDs/GIDs is the mapping from UIDs/GIDs as they should appear inside of
    # a container, to UIDs/GIDs as they should appear outside of the container, and
    # the length of the range of UIDs/GIDs.  Additional mapped sets can be listed
    # and will be heeded by libraries, but there are limits to the number of
    # mappings which the kernel will allow when you later attempt to run a
    # container.
    #
    # remap-uids = 0:1668442479:65536
    # remap-gids = 0:1668442479:65536

    # Remap-User/Group is a name which can be used to look up one or more UID/GID
    # ranges in the /etc/subuid or /etc/subgid file.  Mappings are set up starting
    # with an in-container ID of 0 and the a host-level ID taken from the lowest
    # range that matches the specified name, and using the length of that range.
    # Additional ranges are then assigned, using the ranges which specify the
    # lowest host-level IDs first, to the lowest not-yet-mapped container-level ID,
    # until all of the entries have been used for maps. This setting overrides the
    # Remap-UIDs/GIDs setting.
    #
    # remap-user = "storage"
    # remap-group = "storage"

    [storage.options.pull_options]
    # Options controlling how storage is populated when pulling images.

    # Enable the "zstd:chunked" feature, which allows partial pulls, reusing
    # content that already exists on the system. This is disabled by default,
    # and must be explicitly enabled to be used. For more on zstd:chunked, see
    # https://github.com/containers/storage/blob/main/docs/containers-storage-zstd-chunked.md
    enable_partial_images = "false"

    # Tells containers/storage to use hard links rather then create new files in
    # the image, if an identical file already existed in storage.
    use_hard_links = "false"

    # Path to an ostree repository that might have
    # previously pulled content which can be used when attempting to avoid
    # pulling content from the container registry.
    ostree_repos = ""

    [storage.options.overlay]
    # Storage Options for overlay

    # Do not create a PRIVATE bind mount on the home directory.
    skip_mount_home = "true"

    # Size is used to set a maximum size of the container image.  Only supported by
    # certain container storage drivers.
    size = ""
